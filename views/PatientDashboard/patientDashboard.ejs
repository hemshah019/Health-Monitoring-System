<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Dashboard</title>
    <link rel="stylesheet" href="/CSS/PatientDashboard_CSS/patientDashboard.css">
</head>
<body data-patient-id="<%= patient.Patient_ID %>"> 
    <!-- Header Section -->
    <header class="header">
        <button class="menu-toggle">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
        <div class="logo-container">
            <img src="/image/logo.png" alt="Company Logo" class="logo">
        </div>
        
        <div class="title">Health Monitoring System</div>

        <div class="patient-profile-header">
            <img class="patient-image-header" src="<%= patientData?.patientProfileImage || '/image/patient.png' %>"alt="Patient">
            <div class="patient-info-header">
                <h3><%= patientData.First_Name %> <%= patientData.Last_Name %></h3>
                <p>Patient</p>
            </div>
        </div>
    </header>

    <% if (message === 'login-success') { %>
        <div id="toast" class="toast success">
          <span>Signed in successfully!</span>
          <button onclick="document.getElementById('toast').style.display='none'">×</button>
        </div>
      <% } %>

    <!-- Side Bar Section -->
    <div class="container">
        <aside class="sidebar">
            <div class="nav-items">
                <div class="nav-item active">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                    </svg>
                    Dashboard
                </div>
                <div class="nav-item-with-dropdown">
                    <div class="nav-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                            <path d="M20.5 4.5c-2.49 0-4.24 1.55-5.5 3.09C13.24 6.05 11.49 4.5 9 4.5 5.78 4.5 3 7.1 3 10.32c0 2.21 1.02 4.21 2.39 5.76 1.33 1.5 3.07 2.77 4.86 4.09l1.25.89c.34.25.8.25 1.14 0l1.25-.89c1.79-1.32 3.53-2.59 4.86-4.09 1.37-1.55 2.39-3.55 2.39-5.76C21 7.1 18.22 4.5 15 4.5zm-2.54 6.94-1.58-2.63c-.38-.64-1.35-.6-1.7.07l-1.6 3.13-.67-1.07c-.36-.57-1.19-.53-1.54.08l-1.7 3.08c-.32.58.1 1.3.77 1.3h2.74c.43 0 .83-.23 1.05-.61l.78-1.33 1.31 2.17c.39.64 1.34.6 1.7-.07l2.03-3.7c.34-.6-.14-1.32-.81-1.32h-1.26c-.38 0-.73.21-.91.55z"/>
                        </svg>
                        Health Vital Signs
                        <svg class="dropdown-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="dropdown-menu">
                        <div class="dropdown-item">Heart Rate</div>
                        <div class="dropdown-item">Body Temperature</div>
                        <div class="dropdown-item">Oxygen Saturation (SpO2)</div>
                        <div class="dropdown-item">Body Fall Detection</div>
                    </div>
                </div>             
                <div class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                        <path d="M3 3v18h18v-2H5V3H3zm16 4h2v12h-2V7zm-4 4h2v8h-2v-8zm-4 3h2v5h-2v-5zm-4 2h2v3H7v-3z"/>
                    </svg>
                    Analytics
                </div>                 
                <div class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                        <path d="M19 3h-4.18C14.4 2.4 13.3 2 12 2s-2.4.4-2.82 1H5c-1.1 0-2 .9-2 2v15c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm5 16H7v-2h10v2zm0-4H7v-2h10v2zm0-4H7V9h10v2z"/>
                    </svg>
                    Tasks
                </div>
                <div class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                    </svg>
                    Alerts
                </div> 
                <div class="nav-item-with-dropdown">
                    <div class="nav-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                            <path d="M12 2C6.48 2 2 6.48 2 12v4c0 2.21 1.79 4 4 4h2v-2H6c-1.1 0-2-.9-2-2v-4c0-4.42 3.58-8 8-8s8 3.58 8 8v4c0 1.1-.9 2-2 2h-2v2h2c2.21 0 4-1.79 4-4v-4c0-5.52-4.48-10-10-10zm-1 17h2v2h-2v-2zm-5-7h2v2H6v-2zm10 0h2v2h-2v-2z"/>
                        </svg>
                        Customer Care
                        <svg class="dropdown-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="dropdown-menu">
                        <div class="dropdown-customer-item">Messages</div>
                        <div class="dropdown-customer-item">Compliances</div>
                        <div class="dropdown-customer-item">Improvements</div>
                    </div>
                </div>                               
                <div class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                    </svg>
                    Settings
                </div>
                <div class="nav-item" id="logout-button">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                    Logout
                </div>
            </div>
        </aside>

        <!-- Logout Confirmation Dialog -->
        <div id="logout-dialog" class="dialog-overlay">
            <div class="dialog-box">
                <h3>Logout Confirmation</h3>
                <p>Are you sure you want to logout?</p>
                <div class="dialog-buttons">
                    <button id="cancel-logout" class="btn-cancel">Cancel</button>
                    <button id="confirm-logout" class="btn-confirm">Yes, Logout</button>
                </div>
            </div>
        </div>

        <!-- Patient Dashboard Section -->
        <main class="content">
            <div class="dashboard-header">
                <h1>Dashboard</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>

            <!-- Stats Sections -->
            <div class="stats-container">
                
                <!-- Heart Rate Card -->
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background-color: #3498db;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                                <path fill="white" d="M320 472c-11.4 0-22.6-4.1-31.4-12.3L103.2 288.1c-45.6-45.6-45.6-119.5 0-165.1s119.5-45.6 165.1 0l17.7 17.7 17.7-17.7c45.6-45.6 119.5-45.6 165.1 0s45.6 119.5 0 165.1L351.4 459.7c-8.8 8.2-20 12.3-31.4 12.3z"/>
                            </svg>
                        </div>
                        <div class="stat-title">Heart Rate</div>
                    </div>
                    <div class="stat-value">
                        <% if (healthStats.heartRate) { %>
                            <%= healthStats.heartRate.Current_Heart_Rate %> BPM
                        <% } else { %>
                            No data
                        <% } %>
                    </div>
                    <div class="stat-footer">
                        <% if (healthStats.heartRate) { %>
                            Updated on <%= healthStats.heartRate.displayDateTime %>
                        <% } else { %>
                            No data available
                        <% } %>
                    </div>
                </div>
            
                <!-- Body Temperature Card -->
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background-color: #e74c3c;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                                <path fill="white" d="M272 304V112a112 112 0 10-224 0v192a128 128 0 10224 0zM160 496a96 96 0 01-96-96 96.1 96.1 0 0148-83.1V112a48 48 0 0196 0v204.9a96.1 96.1 0 0148 83.1 96 96 0 01-96 96z"/>
                            </svg>
                        </div>
                        <div class="stat-title">Body Temperature</div>
                    </div>
                    <div class="stat-value">
                        <% if (healthStats.temperature) { %>
                            <%= healthStats.temperature.Current_Temperature %> °C
                        <% } else { %>
                            No data
                        <% } %>
                    </div>
                    <div class="stat-footer">
                        <% if (healthStats.temperature) { %>
                            Updated on <%= healthStats.temperature.displayDateTime %>
                        <% } else { %>
                            No data
                        <% } %>
                    </div>
                </div>
            
                <!-- Oxygen Saturation (SpO2) Card -->
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background-color: #9b59b6;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                                <path fill="white" d="M96 160v64c0 29.6 7.9 58.5 22.9 84L240 464V304H192V32h-32C124.7 32 96 60.7 96 96v64zm448 0V96c0-35.3-28.7-64-64-64h-32v272h-48v160l121.1-156c15-25.5 22.9-54.4 22.9-84v-64zM304 32v272h32V32h-32z"/>
                            </svg>
                        </div>
                        <div class="stat-title">Oxygen Saturation (SpO2)</div>
                    </div>
                    <div class="stat-value">
                        <% if (healthStats.spO2) { %>
                            <%= healthStats.spO2.Current_SpO2 %> %
                        <% } else { %>
                            No data
                        <% } %>
                    </div>
                    <div class="stat-footer">
                        <% if (healthStats.spO2) { %>
                            Updated on <%= healthStats.spO2.displayDateTime %>
                        <% } else { %>
                            No data available
                        <% } %>
                    </div>
                </div>
            
                <!-- Body Fall Detection Card -->
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-icon" style="background-color: #f1c40f;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                <path fill="white" d="M288 96a48 48 0 100-96 48 48 0 000 96zm227.2 243.9L403.1 303l16-96 64 40c12.2 7.6 28.3 3.9 35.8-8.3s3.9-28.3-8.3-35.8l-88-55-46-25.8c-15.3-8.6-33.9-8.4-49.1.4l-76.8 44.5L136.1 120.6c-11-9.8-27.9-8.8-37.7 2.3s-8.8 27.9 2.3 37.7l92.2 82.4 29.6 40.8-44.2 92.4-55.6-11.1c-13.6-2.7-26.7 6.1-29.4 19.7s6.1 26.7 19.7 29.4l88 17.6c12.4 2.5 25.2-3.7 30.7-15.2l31.9-66.7 96.5 32.2-38.5 77c-6.5 13-1.2 28.7 11.8 35.2s28.7 1.2 35.2-11.8l43.4-86.9 96.6 26.5c14.1 3.8 28.6-4.5 32.4-18.6s-4.5-28.6-18.6-32.4z"/>
                            </svg>
                        </div>
                        <div class="stat-title">Body Fall Detection</div>
                    </div>
                    <div class="stat-value">
                        <% if (healthStats.fallDetection) { %>
                            Yes, <%= healthStats.fallDetection.Fall_Direction %>
                        <% } else { %>
                            No data
                        <% } %>
                    </div>
                    <div class="stat-footer">
                        <% if (healthStats.fallDetection) { %>
                            Updated on <%= healthStats.fallDetection.displayDateTime %>
                        <% } else { %>
                            No data available
                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content Sections -->
            <div class="dashboard-sections">
                <div class="left-column">
                    <!-- Analytics Section -->
                    <div class="dashboard-section program-section">
                        <div class="section-header">
                            <h2>Analytics</h2>
                            <div class="view-all">View All</div>
                        </div>
                        <div class="program-cards">
                            <div class="program-card heart-rate">
                                <div class="card-title">Heart Rate</div>
                            </div>
                            <div class="program-card temperature">
                                <div class="card-title">Body Temperature</div>
                            </div>
                            <div class="program-card oxygen">
                                <div class="card-title">Oxygen Saturation (SpO2)</div>
                            </div>
                            <div class="program-card fall-detection">
                                <div class="card-title">Body Fall Detection</div>
                            </div>
                        </div>
                    </div>

                    <!-- Customer Care Section -->
                    <div class="dashboard-section program-section">
                        <div class="section-header">
                            <h2>Customer Care</h2>
                            <div class="view-all">View All</div>
                        </div>
                        <div class="program-cards customer-care-cards">
                            <div class="program-card messages">
                                <div class="card-title">Messages</div>
                                <div class="card-value"><%= messageCount %></div>
                            </div>
                            <div class="program-card compliances">
                                <div class="card-title">Compliances</div>
                                <div class="card-value"><%= complianceCount %></div>
                            </div>
                            <div class="program-card improvements">
                                <div class="card-title">Improvements</div>
                                <div class="card-value"><%= improvementCount %></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tasks Section -->
                <div class="dashboard-section tasks-section">
                    <div class="section-header">
                        <h2>My Task's</h2>
                        <div class="view-all">View All</div>
                    </div>
                    <div class="task-list">
                        <% if (dashboardTasks && dashboardTasks.length > 0) { %>
                            <% dashboardTasks.forEach(task => { %>
                                <div class="task-item">
                                    <div class="task-avatar">
                                        <img src="/image/admin.png" alt="Avatar">
                                    </div>
                                    <div class="task-details">
                                        <div class="task-description"><%= task.Task_Name %></div>
                                        <div class="task-person">
                                            <%= task.alertInfo ? task.alertInfo.Alert_Type : 'General Task' %>
                                        </div>
                                    </div>
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p style="padding: 10px;">No tasks assigned.</p>
                        <% } %>
                    </div>
                </div>
            </div>
        </main>

        <!-- Health Vital Signs Content -->
        <main class="content healths-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Health Vital Signs Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>

            <div class="healths-container">
                <div class="vital-box heart-rate-box">
                    <h3>Heart Rate</h3>
                </div>
                <div class="vital-box temp-box">
                    <h3>Body Temperature</h3>
                </div>
                <div class="vital-box oxygen-box">
                    <h3>Oxygen Saturation (SpO₂)</h3>
                </div>
                <div class="vital-box fall-box">
                    <h3>Body Fall Detection</h3>
                </div>
            </div>            
        </main>

        <!-- Heart Rate Content -->
        <main class="content heart-rate-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Heart Rate Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>

            <div class="heart-rate-container">
                <div class="heart-rate-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search heart rate..." data-search-type="heartRate">
                    </div>
                </div>

                <div class="heart-rate-table-container full-width">
                    <table class="heart-rate-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Current Heart Rate</th>
                                <th>Average Heart Rate</th>
                                <th>Normal Heart Rate</th>
                                <th>Date & Time</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" data-pagination="heartRate">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Heart Rate Delete Confirmation Modal -->
        <div id="HeartRateDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="HeartRateDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelHeartRateDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmHeartRateDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>


        <!-- Body Temperature Content -->
        <main class="content body-temperature-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Body Temperature Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            
            <div class="body-temperature-container">
                <div class="body-temperature-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search body temperature..." data-search-type="bodyTemp">
                    </div>
                </div>

                <div class="body-temperature-table-container full-width">
                    <table class="body-temperature-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Current Temperature °C/°F</th>
                                <th>Average Temperature °C/°F</th>
                                <th>Normal Temperature °C/°F</th>
                                <th>Date & Time</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" data-pagination="bodyTemp">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Body Temperature Delete Confirmation Modal -->
        <div id="BodyTempDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="BodyTempDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelBodyTempDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmBodyTempDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>


        <!-- Oxygen Saturation Content -->
        <main class="content oxygen-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Oxygen Saturation (SpO₂) Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="oxygen-container">
                <div class="oxygen-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search oxygen saturation (SpO₂)..." data-search-type="spo2">
                    </div>
                </div>

                <div class="oxygen-table-container full-width">
                    <table class="oxygen-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Current SpO₂</th>
                                <th>Average SpO₂</th>
                                <th>Normal SpO₂</th>
                                <th>Date & Time</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" data-pagination="oxygen">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- SpO2 Delete Confirmation Modal -->
        <div id="SpO2DeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="SpO2DeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelSpO2DeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmSpO2DeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>


        <!-- Body Fall Detection Content -->
        <main class="content fall-detection-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Body Fall Detection Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="fall-detection-container">
                <div class="fall-detection-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search fall detection..." data-search-type="fallDetection">
                    </div>
                </div>

                <div class="fall-detection-table-container full-width">
                    <table class="fall-detection-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Fall Detected</th>
                                <th>Fall Direction</th>
                                <th>Date & Time</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" data-pagination="fall-detection">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Fall Detection Delete Confirmation Modal -->
        <div id="FallDetectionDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="FallDetectionDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelFallDetectionDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmFallDetectionDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>


        <!-- Analytics Content -->
        <main class="content analytics-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Analytics Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="analytics-container">
                <div class="analytics-tabs">
                    <nav class="tabs-nav">
                        <button class="tab-link active" data-tab="heart-rate-tab">Heart Rate</button>
                        <button class="tab-link" data-tab="temperature-tab">Body Temperature</button>
                        <button class="tab-link" data-tab="oxygen-tab">Oxygen Saturation (SpO2)</button>
                        <button class="tab-link" data-tab="fall-detection-tab">Body Fall Detection</button>
                    </nav>
        
                    <!-- Heart Rate Analytics Tab -->
                    <div class="tabs-content">
                        <div id="heart-rate-tab" class="tab-panel active">
                            <h2>Heart Rate Analytics</h2>
                            <div class="heart-rate-stats">
                                <div class="analytics-stat-card">
                                    <h3>Average Heart Rate</h3>
                                    <div class="analytics-stat-value" id="avgHeartRate">N/A</div>
                                    <p>BPM (last 30 readings)</p>
                                </div>
                                <div class="analytics-stat-card">
                                    <h3>Last Reading</h3>
                                    <div class="analytics-stat-value" id="lastHeartRate">N/A</div>
                                    <p>Current Status: <span id="lastHeartRateStatus">N/A</span></p>
                                </div>
                            </div>
                            
                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>Heart Rate Trend</h3>
                                    <canvas id="heartRateLineChart"></canvas>
                                </div>

                            </div>
                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>Status Distribution</h3>
                                    <canvas id="heartRatePieChart"></canvas>
                                </div>
                            </div>
                            
                        </div>

                        <!-- Body Temperature Analytics Tab -->
                        <div id="temperature-tab" class="tab-panel">
                            <h2>Body Temperature Analytics</h2>
                            <div class="heart-rate-stats">
                                <div class="analytics-stat-card">
                                    <h3>Average Temperature</h3>
                                    <div class="analytics-stat-value" id="avgTemperature">N/A</div>
                                    <p>°C (last 30 readings)</p>
                                </div>
                                <div class="analytics-stat-card">
                                    <h3>Last Reading</h3>
                                    <div class="analytics-stat-value" id="lastTemperature">N/A</div>
                                    <p>Current Status: <span id="lastTemperatureStatus">N/A</span></p>
                                </div>
                            </div>

                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>Temperature Trend</h3>
                                    <canvas id="temperatureLineChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>Status Distribution</h3>
                                    <canvas id="temperaturePieChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- SpO2 Analytics Tab -->
                        <div id="oxygen-tab" class="tab-panel">
                            <h2>Oxygen Saturation (SpO2) Analytics</h2>

                            <div class="heart-rate-stats">
                                <div class="analytics-stat-card">
                                    <h3>Average SpO2</h3>
                                    <div class="analytics-stat-value" id="avgSpO2">N/A</div>
                                    <p>Percentage (last 30 readings)</p>
                                </div>
                                <div class="analytics-stat-card">
                                    <h3>Last Reading</h3>
                                    <div class="analytics-stat-value" id="lastSpO2">N/A</div>
                                    <p>Current Status: <span id="lastSpO2Status">N/A</span></p>
                                </div>
                            </div>

                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>SpO2 Trend</h3>
                                    <canvas id="spO2LineChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>Status Distribution</h3>
                                    <canvas id="spO2PieChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div id="fall-detection-tab" class="tab-panel">
                            <h2>Body Fall Detection Analytics</h2>
                            <div class="heart-rate-stats">
                                <div class="analytics-stat-card">
                                    <h3>Total Falls</h3>
                                    <div class="analytics-stat-value" id="totalFalls">N/A</div>
                                    <p>Recorded falls (last 30 events)</p>
                                </div>
                                <div class="analytics-stat-card">
                                    <h3>Last Fall</h3>
                                    <div class="analytics-stat-value" id="lastFallDate">N/A</div>
                                    <p>Direction: <span id="lastFallDirection">N/A</span></p>
                                </div>
                            </div>
                        
                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>Falls Over Time</h3>
                                    <canvas id="fallOverTimeChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-card">
                                    <h3>Fall Direction Distribution</h3>
                                    <canvas id="fallDirectionPieChart"></canvas>
                                </div>
                            </div>
                        </div>   
                                             
                    </div>
                </div>
            </div>
        </main>

        <!-- Tasks Content -->
        <main class="content tasks-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Tasks Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="tasks-container">
                <div class="tasks-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search tasks..." data-search-type="tasks">
                    </div>
                </div>

                <div class="tasks-table-container full-width">
                    <table class="tasks-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Alert Type</th>
                                <th>Task Name</th>
                                <th>Task Priority</th>
                                <th>Alert Date & Time</th>
                                <th>Completion Time</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>                                           
                    </table>
                </div>
                <div class="pagination" data-pagination="tasks">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Custom Task Delete Confirmation Modal -->
        <div id="taskDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="taskDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="canceltaskDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmtaskDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>

        <!-- Task View Modal -->
        <div class="modal-overlay" id="taskViewModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Task & Alert Details</h2>
                    <button class="close-modal" id="closeTaskModal">&times;</button>
                </div>
                <div class="modal-body">   

                    <!-- Health Alert Details Section -->
                    <h3 class="section-title">Health Alert Details</h3>
                    <div class="info-grid">
                        <div class="info-field">
                            <span class="info-field-label">Alert Type</span>
                            <span class="info-field-value" id="task_view_alert_type"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Current Value</span>
                            <span class="info-field-value" id="task_view_current_value"></span>
                        </div>
                        <div class="info-field">
                            <span class="fallDetectionValue">Fall Detection</span>
                            <span class="info-field-value" id="task_view_fallDetectionValue"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Normal Range</span>
                            <span class="info-field-value" id="task_view_normal_range"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Alert Date & Time</span>
                            <span class="info-field-value" id="task_view_alert_datetime"></span>
                        </div>
                    </div>
                    
                    <!-- Task Assignment Details Section -->
                    <h3 class="section-title">Task Assignment Details</h3>
                    <div class="info-grid">
                        <div class="info-field">
                            <span class="info-field-label">Task Name</span>
                            <span class="info-field-value" id="task_view_task_name"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Task Priority</span>
                            <span class="info-field-value" id="task_view_task_priority">
                                <span class="priority-badge priority-high"></span>
                            </span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Task Date</span>
                            <span class="info-field-value" id="task_view_task_date"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label"></span>
                            <span class="info-field-value" id="task_view_completion_time"></span>
                        </div>
                        <div class="info-field info-field-full">
                            <span class="info-field-label"></span>
                            <span class="info-field-value" id="task_view_task_description"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="closeTaskModalBtn">Close</button>
                </div>
            </div>
        </div>

        <!-- Alerts Content -->
        <main class="content alerts-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Alerts Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
        
            <div class="alerts-container">
                <div class="alerts-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search alerts..." data-search-type="alerts">

                    </div>
                </div>
        
                <div class="alerts-table-container full-width">
                    <table class="alerts-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Alert Type</th>
                                <th>Current Value</th>
                                <th>Fall Direction</th>
                                <th>Normal Range</th>
                                <th>Alert Date & Time</th>
                                <th>Alert Status</th>
                                <th>Task Assigned</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>
        
                <div class="pagination" data-pagination="alerts">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Alert Delete Confirmation Modal -->
        <div id="alertDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="alertDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelAlertDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmAlertDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>

        <!-- Customer Care Content -->
        <main class="content customer-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Customer Care Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="customer-container">
                <div class="vital-box messages-box">
                    <h3>Messages</h3>
                </div>
                <div class="vital-box compliances-box">
                    <h3>Compliances</h3>
                </div>
                <div class="vital-box improvements-box">
                    <h3>Improvements</h3>
                </div>
            </div> 
        </main>

        <!-- Messages Content -->
        <main class="content messages-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Messages Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>

            <div class="messages-container">
                <div class="messages-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search messages..." data-search-type="messages">
                    </div>
                    <div class="messages-actions"><button class="add-new-btn">Add Message</button></div>
                </div>
        
                <div class="messages-table-container full-width">
                    <table class="messages-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Message Type</th>
                                <th>Message Content</th>
                                <th>Message Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>
        
                <div class="pagination" data-pagination="messages">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Custom Mesage Delete Confirmation Modal -->
        <div id="MessageDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="MessageDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelMessageDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmMessageDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>

        <!-- Messages View Modal -->
        <div class="modal-overlay" id="messageViewModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Message Details</h2>
                    <button class="close-modal" id="closeMessageModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="info-grid">
                        <div class="info-field">
                            <span class="info-field-label">Message ID</span>
                            <span class="info-field-value" id="message_view_id"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Message Type</span>
                            <span class="info-field-value" id="message_view_type"></span>
                        </div>
                        <div class="info-field info-field-full">
                            <span class="info-field-label">Message Content</span>
                            <span class="info-field-value" id="message_view_content"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Date & Time</span>
                            <span class="info-field-value" id="message_view_datetime"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Status</span>
                            <span class="info-field-value" id="message_view_status"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Admin Response</span>
                            <span class="info-field-value" id="message_view_response"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Response Date</span>
                            <span class="info-field-value" id="message_view_responsedate"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="closeMessageModalBtn">Close</button>
                </div>
            </div>
        </div>

        <!-- Message Form -->
        <div id="newMessagePopup" class="popup-overlay">
            <div class="popup-form">
                <div class="popup-header">
                    <h3 class="popup-title">Add New Message</h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="popup-content">
                    <form id="newMessageForm">
                        <div class="form-group">
                            <label for="messageType">Message Type</label>
                            <select class="form-control" id="messageType" required>
                                <option value="">Select message type</option>
                                <option value="Inquiry">Inquiry</option>
                                <option value="Feedback">Feedback</option>
                                <option value="Request">Request</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="messageContent">Message Content</label>
                            <textarea class="form-control" id="messageContent" placeholder="Enter message content..." required minlength="10"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="messageStatus">Status</label>
                            <input type="text" class="form-control" id="messageStatus" value="Pending" disabled>
                        </div>
                        <div class="form-group">
                            <label for="messageDate">Date & Time</label>
                            <input type="datetime-local" class="form-control" id="messageDate" required>
                        </div>
                    </form>
                </div>
                <div class="form-actions">
                    <button class="cancel-btn" data-dismiss="popup">Cancel</button>
                    <button class="submit-btn" id="submitMessage">Submit</button>
                </div>
            </div>
        </div>

        <!-- Compliance Content -->
        <main class="content compliance-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Compliances Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>

            <div class="compliance-container">
                <div class="compliance-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search compliance..." data-search-type="compliance">
                    </div>
                    <div class="compliance-actions"><button class="add-new-btn">Add Compliance</button></div>
                </div>
        
                <div class="compliance-table-container full-width">
                    <table class="compliance-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Compliance Type</th>
                                <th>Compliance Notes</th>
                                <th>Compliance Date</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>
        
                <div class="pagination" data-pagination="compliances">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Custom Compliance Delete Confirmation Modal -->
        <div id="ComplianceDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="ComplianceDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelComplianceDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmComplianceDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>

        <!-- Compliance View Modal -->
        <div class="modal-overlay" id="complianceViewModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Compliance Details</h2>
                    <button class="close-modal" id="closeComplianceModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="info-grid">
                        <div class="info-field">
                            <span class="info-field-label">Compliance ID</span>
                            <span class="info-field-value" id="compliance_view_id"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Compliance Type</span>
                            <span class="info-field-value" id="compliance_view_type"></span>
                        </div>
                        <div class="info-field info-field-full">
                            <span class="info-field-label">Compliance Notes</span>
                            <span class="info-field-value" id="compliance_view_notes"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Compliance Date</span>
                            <span class="info-field-value" id="compliance_view_date"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Status</span>
                            <span class="info-field-value" id="compliance_view_status"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Admin Feedback</span>
                            <span class="info-field-value" id="compliance_view_feedback"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Response Date</span>
                            <span class="info-field-value" id="compliance_view_response"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="closeComplianceModalBtn">Close</button>
                </div>
            </div>
        </div>

        <!-- Compliance Form -->
        <div id="newCompliancePopup" class="popup-overlay">
            <div class="popup-form">
                <div class="popup-header">
                    <h3 class="popup-title">Add New Compliance</h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="popup-content">
                    <form id="newComplianceForm">
                        <div class="form-group">
                            <label for="complianceType">Compliance Type</label>
                            <input type="text" class="form-control" id="complianceType" placeholder="Enter compliance type..." required>
                        </div>
                        <div class="form-group">
                            <label for="complianceNotes">Compliance Notes</label>
                            <textarea class="form-control" id="complianceNotes" placeholder="Enter compliance notes..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="complianceStatus">Status</label>
                            <input type="text" class="form-control" id="complianceStatus" value="Pending" disabled>
                            <input type="hidden" name="complianceStatus" value="Pending">
                        </div>                        
                        <div class="form-group">
                            <label for="complianceDate">Compliance Date</label>
                            <input type="datetime-local" class="form-control" id="complianceDate" required>
                        </div>
                    </form>
                </div>
                <div class="form-actions">
                    <button class="cancel-btn" data-dismiss="popup">Cancel</button>
                    <button class="submit-btn" id="submitCompliance">Submit</button>
                </div>
            </div>
        </div>

        <!-- Improvement Content -->
        <main class="content improvement-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Improvements Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>

            <div class="improvement-container">
                <div class="improvement-actions">
                    <div class="search-box">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#6699CC"/>
                        </svg>
                        <input type="text" placeholder="Search improvements..."  data-search-type="improvement">
                    </div>
                    <div class="improvement-actions"><button class="add-new-btn">Add Improvement</button></div>
                </div>
       
                <div class="improvement-table-container full-width">
                    <table class="improvement-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Category</th>
                                <th>Suggestion Description</th>
                                <th>Date Submitted</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>
        
                <div class="pagination" data-pagination="improvements">
                    <button class="pagination-btn prev">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M14 6l1.41 1.41L10.83 12l4.58 4.59L14 18l-6-6 6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="page-buttons"></div>
                    <button class="pagination-btn next">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Custom Improvement Delete Confirmation Modal -->
        <div id="ImprovementDeleteConfirmModal" class="delete-modal" style="display: none;">
            <div class="delete-modal-content">
                <h3>Delete Confirmation</h3>
                <p id="ImprovementDeleteConfirmText" style="margin: 10px 0;"></p>
                <div class="delete-dialog-buttons">
                    <button id="cancelImprovementDeleteBtn" class="btn-delete-cancel">Cancel</button>
                    <button id="confirmImprovementDeleteBtn" class="btn-delete-confirm">Yes, Delete</button>
                </div>
            </div>
        </div>

        <!-- Improvement View Modal -->
        <div class="modal-overlay" id="improvementViewModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Improvement Suggestion Details</h2>
                    <button class="close-modal" id="closeImprovementModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="info-grid">
                        <div class="info-field">
                            <span class="info-field-label">Improvement ID</span>
                            <span class="info-field-value" id="improvement_view_id"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Category</span>
                            <span class="info-field-value" id="improvement_view_category"></span>
                        </div>
                        <div class="info-field info-field-full">
                            <span class="info-field-label">Suggestion Description</span>
                            <span class="info-field-value" id="improvement_view_description"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Date Submitted</span>
                            <span class="info-field-value" id="improvement_view_date"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Status</span>
                            <span class="info-field-value" id="improvement_view_status"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Admin Response</span>
                            <span class="info-field-value" id="improvement_view_response"></span>
                        </div>
                        <div class="info-field">
                            <span class="info-field-label">Implementation Date</span>
                            <span class="info-field-value" id="improvement_view_implementation_date"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="closeImprovementModalBtn">Close</button>
                </div>
            </div>
        </div>
        
        <!-- Improvement Form -->
        <div id="newImprovementPopup" class="popup-overlay">
            <div class="popup-form">
                <div class="popup-header">
                    <h3 class="popup-title">Add New Improvement</h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="popup-content">
                    <form id="newImprovementForm">
                        <div class="form-group">
                            <label for="improvementCategory">Category</label>
                            <input type="text" class="form-control" id="improvementCategory" placeholder="Enter category..." required>
                        </div>
                        <div class="form-group">
                            <label for="improvementDescription">Suggestion Description</label>
                            <textarea class="form-control" id="improvementDescription" placeholder="Enter suggestion description..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="improvementStatus">Status</label>
                            <input type="text" class="form-control" id="improvementStatus" value="Pending" disabled>
                            <input type="hidden" name="improvementStatus" value="Pending">
                        </div>                        
                        <div class="form-group">
                            <label for="improvementDate">Date Submitted</label>
                            <input type="datetime-local" class="form-control" id="improvementDate" required>
                        </div>
                    </form>
                </div>
                <div class="form-actions">
                    <button class="cancel-btn" data-dismiss="popup">Cancel</button>
                    <button class="submit-btn" id="submitImprovement">Submit</button>
                </div>
            </div>
        </div>

        <!-- Settings Content -->
        <main class="content settings-content" style="display: none;">
            <div class="dashboard-header">
                <h1>Settings Details</h1>
                <div class="date-selector">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 2V6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 10H21" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span data-date>Loading date...</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px;">
                        <path d="M6 9L12 15L18 9" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="settings-container">
                <div class="account-section">
                    <h2>Account</h2>
                    <p>Get notified what's happening right now, you can turn off at any time</p>
                </div>
                
                <hr class="divider">
                
                <div class="profile-section">
                    <h3>My Profile</h3>
                    <div class="profile-image-container">
                        <div class="profile-image">
                            <img id="patientProfilePreview" src="<%= patientData?.patientProfileImage || '/image/patient.png' %>" alt="Profile Image">
                        </div>
                        <div class="profile-buttons">
                            <form id="patientProfileUploadForm" enctype="multipart/form-data" style="display: flex; align-items: center; gap: 10px;">
                              <input type="file" id="patientProfileImage" name="profileImage" accept="image/*" required hidden>
                        
                              <!-- File picker label -->
                              <label for="patientProfileImage" class="upload-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                  <path d="M17 8L12 3L7 8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                  <path d="M12 3V15" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Select Image
                              </label>
                        
                              <!-- Submit Button -->
                              <button type="submit" class="upload-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                  <path d="M12 5L19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Upload Image
                              </button>
                            </form>
                        
                            <!-- Delete Button -->
                            <button type="button" class="deletes-btn" id="deleteProfileImage">
                              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 6H5H21" stroke="#e44258" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="#e44258" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>
                              Delete
                            </button>
                          </div>
                    </div>

                    <!-- Profile Image Delete Confirmation Modal -->
                    <div id="patientProfileDeleteConfirmModal" class="upload-modal-overlay" style="display: none;">
                        <div class="upload-modal-content">
                        <h3>Delete Profile Image</h3>
                        <p>Are you sure you want to delete your profile image? Your default image will be restored.</p>
                        <div class="upload-modal-actions">
                            <button id="confirmPatientProfileDeleteBtn" class="upload-confirm-btn">Delete</button>
                            <button id="cancelPatientProfileDeleteBtn" class="upload-cancel-btn">Cancel</button>
                        </div>
                        </div>
                    </div>
                    
                    <div class="profile-form">

                        <!-- Profile Information -->
                        <h3>Profile Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="settings_username">Username</label>
                                <div class="date-input-container">
                                    <input type="text" id="settings_username" value="<%= patientData.Username %>">
                                    <button class="user-btn">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M4 20C4 16.6863 7.58172 14 12 14C16.4183 14 20 16.6863 20 20" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="status">Status</label>
                                <input type="text" id="status" value="Enrolled" readonly>
                            </div>
                        </div>
                    
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input type="text" id="firstName" value="<%= patientData.First_Name %>">
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input type="text" id="lastName" value="<%= patientData.Last_Name %>">
                            </div>
                        </div>
                    
                        <div class="form-row">
                            <div class="form-group">
                                <label for="age">Age</label>
                                <input type="number" id="age" value="<%= patientData.Age %>">
                            </div>
                            <div class="form-group">
                                <label for="dob">Date of Birth</label>
                                <input type="date" id="dob" value="<%= patientData.Date_Of_Birth ? patientData.Date_Of_Birth.toISOString().split('T')[0] : '' %>">
                            </div>
                        </div>
                    
                        <div class="form-row">
                            <div class="form-group">
                                <label for="gender">Gender</label>
                                <input type="text" id="gender" value="<%= patientData.Gender %>">
                            </div>
                            <div class="form-group">
                                <label for="enrollment-date">Enrollment Date</label>
                                <input type="text" id="enrollment-date" value="<%= patientData.Enrollment_DateTime %>" readonly>
                            </div>
                        </div>
                    
                        <!-- Contact Info -->
                        <h3>Contact Info</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="settings_phoneNumber">Phone Number</label>
                                <input type="text" id="settings_phoneNumber" value="<%= patientData.Phone_Number %>">
                            </div>
                            <div class="form-group">
                                <label for="settings_email">Email Address</label>
                                <div class="email-input-container">
                                    <input type="email" id="settings_email" value="<%= patientData.Email %>">
                                    <button class="email-btn">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M22 6L12 13L2 6" stroke="#555555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="form-row">
                            <div class="form-group" style="width: 100%;">
                                <label for="settings_address">Address</label>
                                <input type="text" id="settings_address" value="<%= patientData.Address %>">
                            </div>
                        </div>
                    
                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button class="cancel-btn">Cancel</button>
                            <button class="save-btn">Save</button>
                        </div>
                    </div>                    
                    
                    <hr class="divider">
                    
                    <div class="delete-account-section">
                        <div class="delete-account-content">
                            <h3>Delete account</h3>
                            <p>When you delete your account, you lose access to Front account services, and we permanently delete your personal data. You can cancel the deletion for 14 days.</p>
                        </div>
                        <div class="delete-account-actions">
                            <button class="delete-account-btn">Delete Account</button>
                            <a href="#" class="learn-more-link">Learn More</a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="/Js/PatientDashboard_JS/patientDashboard.js"></script>
    <script src="/Js/PatientDashboard_JS/patientAction.js"></script>
    <script src="/Js/PatientDashboard_JS/patientHealthData.js"></script>
    <script src="/Js/PatientDashboard_JS/analyticsCharts.js"></script>
    <script src="/Js/PatientDashboard_JS/patientsAlertData.js"></script>
    <script src="/Js/PatientDashboard_JS/patientSettings.js"></script>

</body>
</html>